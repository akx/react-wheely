import{R as p,j as s}from"./index-DGrAEChp.js";function A(e,o){const t=(o-e+180)%360-180;return t<-180?t+360:t}const T=57.2958;function I(e,o,t,r,i){let n=e+o;return t!==void 0&&t>0&&(n=Math.round(n/t)*t),r!==void 0&&(n=Math.max(r,n)),i!==void 0&&(n=Math.min(i,n)),n}function L(e,o){if("changedTouches"in e){for(let t=0;t<e.changedTouches.length;t+=1){const r=e.changedTouches[t];if(r.identifier===o)return[r.clientX,r.clientY]}return}return[e.clientX,e.clientY]}function V(e,o,t,r,i){const n=t.type==="touchstart",a="changedTouches"in t?t.changedTouches[0].identifier:0,c=o.ownerDocument,l=o.getBoundingClientRect(),x=(l.left+l.right)/2,v=(l.top+l.bottom)/2,f=L(t,a);let u=0,d;if(!f)return;switch(e.mode){case"circular":{const m=f[0]-x,y=f[1]-v,b=e.deltaR||1;let j=Math.atan2(y,m);d=g=>{const M=L(g,a);if(M===void 0)return;const[$,w]=M,X=$-x,Y=w-v,E=Math.atan2(Y,X),P=A(E*-T,j*-T)*b;Math.abs(P)>=.1&&(j=E,u+=P,r(g,u))}}break;case"linear":{let m=f;const y=e.deltaX||0,b=e.deltaY||0;d=j=>{const g=L(j,a);if(g===void 0)return;const M=g[0]-m[0],$=g[1]-m[1],w=M*y+$*b;Math.abs(w)>=.1&&(u+=w,m=g,r(j,u))}}break;default:throw new Error(`Unsupported movement mode in configuration: ${JSON.stringify(e)}`)}function h(m){n?(c.removeEventListener("touchmove",d),c.removeEventListener("touchend",h),c.removeEventListener("touchcancel",h)):(c.removeEventListener("mousemove",d),c.removeEventListener("mouseup",h)),i(m,u)}n?(c.addEventListener("touchmove",d),c.addEventListener("touchend",h),c.addEventListener("touchcancel",h)):(c.addEventListener("mousemove",d),c.addEventListener("mouseup",h))}function z(e){if(typeof e=="string")switch(e){case"circular":return{mode:"circular",deltaR:1};case"horizontal":case"vertical":return{mode:"linear",deltaX:e==="horizontal"?1:0,deltaY:e==="vertical"?-1:0};default:throw new Error(`invalid motion mode string: ${e}`)}else if(e.mode)return e;throw new Error("Invalid movement configuration")}function S(e){const{size:o=200,initialDegrees:t,snap:r,min:i,max:n,onBeginChange:a,onChangeValue:c,onCommitValue:l,classNamePrefix:x="wheely-",renderLabel:v,renderWheel:f,movementMode:u="circular"}=e,d=p.useRef(null),[h,m]=p.useState(t||0);p.useEffect(()=>{m(t||0)},[t]);const[y,b]=p.useState(!1),j=p.useCallback(w=>{const X=h,Y=E=>I(X,E,r,i,n);d.current&&!y&&(b(!0),a&&a(X),V(z(u),d.current,w,(E,P)=>{const D=Y(P);h!==D&&(m(D),c&&c(D))},(E,P)=>{b(!1);const D=Y(P);m(D),l&&l(D)}))},[y,h,n,i,u,a,c,l,r]),g=`${o}px`,M={width:g,height:g,touchAction:"none"},$={degrees:h,changing:y,style:M,props:e};return s.jsxs("div",{className:`${x}base`,style:M,ref:d,onMouseDown:j,onTouchStart:j,children:[f?f($):s.jsx("div",{className:`${x}inner`,style:{...M,transform:`rotate(${h.toFixed(1)}deg)`}}),v?v($):null]})}const W={title:"Wheel",component:S},N=({snap10:e,min0:o,max400:t,movementMode:r})=>s.jsx(S,{size:200,snap:e?10:void 0,min:o?0:void 0,max:t?400:void 0,movementMode:r,initialDegrees:42,renderLabel:({degrees:i,style:n,changing:a})=>s.jsxs("div",{className:"my-wheel-label",style:n,children:[i.toFixed(2),a?"...":""]})});N.args={snap10:!1,min0:!1,max400:!1,movementMode:"circular"};N.argTypes={movementMode:{options:["circular","horizontal","vertical"],control:{type:"radio"},defaultValue:"circular"}};const k=()=>{const[e,o]=p.useState("0000000"),t=(i,n)=>{const a=Array.from(e);a.splice(i,1,`${Math.min(n,9)}`),o(a.join(""))},r=Array.from(e).map((i,n)=>s.jsx(S,{size:70,min:0,initialDegrees:+i*36,onChangeValue:a=>t(n,Math.round(a%360/36))},n));return s.jsxs("div",{children:[s.jsx("input",{readOnly:!0,value:`${e.substring(0,3)}-${e.substring(3)}`,style:{fontSize:"40px"}}),s.jsx("div",{style:{display:"flex",marginTop:".5em"},children:r})]})},F=()=>{const[t,r]=p.useState(1),[i,n]=p.useState(Math.floor(100/2)),a=10,c=({degrees:l,style:x})=>s.jsx("div",{className:"my-wheel-label",style:x,children:Math.floor(l/a)});return s.jsxs("table",{children:[s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx(S,{size:150,min:1*a,max:i*a,initialDegrees:t*a,renderLabel:c,onChangeValue:l=>r(Math.floor(l/a))})}),s.jsxs("td",{children:[" ",s.jsx(S,{size:150,min:t*a,max:100*a,initialDegrees:i*a,renderLabel:c,onChangeValue:l=>n(Math.floor(l/a))})]})]}),s.jsx("tr",{children:s.jsxs("td",{colSpan:2,style:{textAlign:"center"},children:["Print pages: ",t," to ",i," / ",100,s.jsx("br",{}),"Print capacity: ",s.jsx("progress",{max:100,value:i-t+1})]})})]})};function C(e,o,t,r){if(Math.abs(r-t)>=360){const u=C(e,o,0,180),d=C(e,o,180,360);return`${u} ${d}`}const i=(t-90)*Math.PI/180,n=(r-90)*Math.PI/180,a=o*Math.cos(i),c=o*Math.sin(i),l=o*Math.cos(n),x=o*Math.sin(n),v=r-t<=180?"0":"1",f=[`M ${a} ${c}`,`A ${o} ${o} 0 ${v} 1 ${l} ${x}`];if(e!==o){const u=e*Math.cos(i),d=e*Math.sin(i),h=e*Math.cos(n),m=e*Math.sin(n);return[...f,`L ${h} ${m}`,`A ${e} ${e} 0 ${v} 0 ${u} ${d}`,"Z"].join("")}return[...f].join("")}const O=()=>{const[e,o]=p.useState(42),t=({degrees:r,style:i,props:{size:n}})=>s.jsxs("svg",{style:i,children:[s.jsx("circle",{cx:n/2,cy:n/2,r:n/2-10,fill:"none",stroke:"#eee",strokeWidth:"10"}),s.jsx("g",{transform:`translate(${n/2},${n/2}) `,children:s.jsx("path",{d:C(30,n/2,0,e>=60?360:r),fill:"#d33"})})]});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{textAlign:"center",padding:"2em",fontFamily:"Consolas,Monaco,monospace",width:"10em",border:"1px solid #eee"},children:[s.jsxs("div",{style:{paddingBottom:"1em"},children:[s.jsxs("div",{style:{fontSize:"2em",paddingBottom:"0.25em"},children:[Math.floor(e),s.jsx("br",{}),"MIN"]}),"SETUP TIME"]}),s.jsx(S,{classNamePrefix:"timer-wheel-",size:150,min:0,max:360,initialDegrees:e*6,onChangeValue:r=>o(r/6),renderWheel:t})]}),s.jsxs("p",{children:["h/t, inspired by"," ",s.jsx("a",{href:"https://x.com/boredpxnda/status/1884668748331659631",children:"boredpxnda"})]})]})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{O as CircularTimer,F as InfuriatingRangeInput,k as PhoneNumberInput,N as WithACustomLabel,W as default};
