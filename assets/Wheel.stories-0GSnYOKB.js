import{R as p,j as s}from"./index-D6jZpWji.js";function N(e,r){const t=(r-e+180)%360-180;return t<-180?t+360:t}function I(e,r,t,o,i){let n=e+r;return t!==void 0&&t>0&&(n=Math.round(n/t)*t),o!==void 0&&(n=Math.max(o,n)),i!==void 0&&(n=Math.min(i,n)),n}function L(e,r){if("changedTouches"in e){for(let t=0;t<e.changedTouches.length;t+=1){const o=e.changedTouches[t];if(o.identifier===r)return[o.clientX,o.clientY]}return}return[e.clientX,e.clientY]}function V(e,r,t,o,i){const n=t.type==="touchstart",a="changedTouches"in t?t.changedTouches[0].identifier:0,c=r.ownerDocument,l=r.getBoundingClientRect(),x=(l.left+l.right)/2,j=(l.top+l.bottom)/2,f=L(t,a);let m=0,d;if(!f)return;switch(e.mode){case"circular":{const u=f[0]-x,y=f[1]-j,b=e.deltaR||1;let M=Math.atan2(y,u);d=g=>{const v=L(g,a);if(v===void 0)return;const[$,w]=v,X=$-x,Y=w-j,E=Math.atan2(Y,X),P=N(E*-57.2958,M*-57.2958)*b;Math.abs(P)>=.1&&(M=E,m+=P,o(g,m))}}break;case"linear":{let u=f;const y=e.deltaX||0,b=e.deltaY||0;d=M=>{const g=L(M,a);if(g===void 0)return;const v=g[0]-u[0],$=g[1]-u[1],w=v*y+$*b;Math.abs(w)>=.1&&(m+=w,u=g,o(M,m))}}break;default:throw new Error(`Unsupported movement mode in configuration: ${JSON.stringify(e)}`)}function h(u){n?(c.removeEventListener("touchmove",d),c.removeEventListener("touchend",h),c.removeEventListener("touchcancel",h)):(c.removeEventListener("mousemove",d),c.removeEventListener("mouseup",h)),i(u,m)}n?(c.addEventListener("touchmove",d),c.addEventListener("touchend",h),c.addEventListener("touchcancel",h)):(c.addEventListener("mousemove",d),c.addEventListener("mouseup",h))}function A(e){if(typeof e=="string")switch(e){case"circular":return{mode:"circular",deltaR:1};case"horizontal":case"vertical":return{mode:"linear",deltaX:e==="horizontal"?1:0,deltaY:e==="vertical"?-1:0};default:throw new Error(`invalid motion mode string: ${e}`)}else if(e.mode)return e;throw new Error("Invalid movement configuration")}function D(e){const{size:r=200,initialDegrees:t,snap:o,min:i,max:n,onBeginChange:a,onChangeValue:c,onCommitValue:l,classNamePrefix:x="wheely-",renderLabel:j,renderWheel:f,movementMode:m="circular"}=e,d=p.useRef(null),[h,u]=p.useState(t||0);p.useEffect(()=>{u(t||0)},[t]);const[y,b]=p.useState(!1),M=p.useCallback(w=>{const X=h,Y=E=>I(X,E,o,i,n);d.current&&!y&&(b(!0),a&&a(X),V(A(m),d.current,w,(E,P)=>{const S=Y(P);h!==S&&(u(S),c&&c(S))},(E,P)=>{b(!1);const S=Y(P);u(S),l&&l(S)}))},[y,h,n,i,m,a,c,l,o]),g=`${r}px`,v={width:g,height:g,touchAction:"none"},$={degrees:h,changing:y,style:v,props:e};return s.jsxs("div",{className:`${x}base`,style:v,ref:d,onMouseDown:M,onTouchStart:M,children:[f?f($):s.jsx("div",{className:`${x}inner`,style:{...v,transform:`rotate(${h.toFixed(1)}deg)`}}),j?j($):null]})}const B={title:"Wheel",component:D},T=({snap10:e,min0:r,max400:t,movementMode:o})=>s.jsx(D,{size:200,snap:e?10:void 0,min:r?0:void 0,max:t?400:void 0,movementMode:o,initialDegrees:42,renderLabel:({degrees:i,style:n,changing:a})=>s.jsxs("div",{className:"my-wheel-label",style:n,children:[i.toFixed(2),a?"...":""]})});T.args={snap10:!1,min0:!1,max400:!1,movementMode:"circular"};T.argTypes={movementMode:{options:["circular","horizontal","vertical"],control:{type:"radio"},defaultValue:"circular"}};const W=()=>{const[e,r]=p.useState("0000000"),t=(i,n)=>{const a=Array.from(e);a.splice(i,1,`${Math.min(n,9)}`),r(a.join(""))},o=Array.from(e).map((i,n)=>s.jsx(D,{size:70,min:0,initialDegrees:+i*36,onChangeValue:a=>t(n,Math.round(a%360/36))},n));return s.jsxs("div",{children:[s.jsx("input",{readOnly:!0,value:`${e.substring(0,3)}-${e.substring(3)}`,style:{fontSize:"40px"}}),s.jsx("div",{style:{display:"flex",marginTop:".5em"},children:o})]})},k=()=>{const[t,o]=p.useState(1),[i,n]=p.useState(Math.floor(100/2)),a=10,c=({degrees:l,style:x})=>s.jsx("div",{className:"my-wheel-label",style:x,children:Math.floor(l/a)});return s.jsxs("table",{children:[s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx(D,{size:150,min:1*a,max:i*a,initialDegrees:t*a,renderLabel:c,onChangeValue:l=>o(Math.floor(l/a))})}),s.jsxs("td",{children:[" ",s.jsx(D,{size:150,min:t*a,max:100*a,initialDegrees:i*a,renderLabel:c,onChangeValue:l=>n(Math.floor(l/a))})]})]}),s.jsx("tr",{children:s.jsxs("td",{colSpan:2,style:{textAlign:"center"},children:["Print pages: ",t," to ",i," / ",100,s.jsx("br",{}),"Print capacity: ",s.jsx("progress",{max:100,value:i-t+1})]})})]})};function C(e,r,t,o){if(Math.abs(o-t)>=360){const m=C(e,r,0,180),d=C(e,r,180,360);return`${m} ${d}`}const i=(t-90)*Math.PI/180,n=(o-90)*Math.PI/180,a=r*Math.cos(i),c=r*Math.sin(i),l=r*Math.cos(n),x=r*Math.sin(n),j=o-t<=180?"0":"1",f=[`M ${a} ${c}`,`A ${r} ${r} 0 ${j} 1 ${l} ${x}`];if(e!==r){const m=e*Math.cos(i),d=e*Math.sin(i),h=e*Math.cos(n),u=e*Math.sin(n);return[...f,`L ${h} ${u}`,`A ${e} ${e} 0 ${j} 0 ${m} ${d}`,"Z"].join("")}return[...f].join("")}const F=()=>{const[e,r]=p.useState(42),t=({degrees:o,style:i,props:{size:n}})=>s.jsxs("svg",{style:i,children:[s.jsx("circle",{cx:n/2,cy:n/2,r:n/2-10,fill:"none",stroke:"#eee",strokeWidth:"10"}),s.jsx("g",{transform:`translate(${n/2},${n/2}) `,children:s.jsx("path",{d:C(30,n/2,0,e>=60?360:o),fill:"#d33"})})]});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{textAlign:"center",padding:"2em",fontFamily:"Consolas,Monaco,monospace",width:"10em",border:"1px solid #eee"},children:[s.jsxs("div",{style:{paddingBottom:"1em"},children:[s.jsxs("div",{style:{fontSize:"2em",paddingBottom:"0.25em"},children:[Math.floor(e),s.jsx("br",{}),"MIN"]}),"SETUP TIME"]}),s.jsx(D,{classNamePrefix:"timer-wheel-",size:150,min:0,max:360,initialDegrees:e*6,onChangeValue:o=>r(o/6),renderWheel:t})]}),s.jsxs("p",{children:["h/t, inspired by"," ",s.jsx("a",{href:"https://x.com/boredpxnda/status/1884668748331659631",children:"boredpxnda"})]})]})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{F as CircularTimer,k as InfuriatingRangeInput,W as PhoneNumberInput,T as WithACustomLabel,B as default};
