import{R as w,j as r}from"./index-Dpg2DE-F.js";function z(e,a){const t=(a-e+180)%360-180;return t<-180?t+360:t}const S=57.2958;function $(e,a,t,o,i){let s=e+a;return t!==void 0&&t>0&&(s=Math.round(s/t)*t),o!==void 0&&(s=Math.max(o,s)),i!==void 0&&(s=Math.min(i,s)),s}function L(e,a){if("changedTouches"in e){for(let t=0;t<e.changedTouches.length;t+=1){const o=e.changedTouches[t];if(o.identifier===a)return[o.clientX,o.clientY]}return}return[e.clientX,e.clientY]}function A(e,a,t,o,i){const s=t.type==="touchstart",n="changedTouches"in t?t.changedTouches[0].identifier:0,c=a.ownerDocument,l=a.getBoundingClientRect(),y=(l.left+l.right)/2,D=(l.top+l.bottom)/2,x=L(t,n);let d=0,u;if(!x)return;switch(e.mode){case"circular":{const f=x[0]-y,b=x[1]-D,E=e.deltaR||1;let m=Math.atan2(b,f);u=g=>{const j=L(g,n);if(j===void 0)return;const[M,v]=j,R=M-y,p=v-D,X=Math.atan2(p,R),Y=z(X*-S,m*-S)*E;Math.abs(Y)>=.1&&(m=X,d+=Y,o(g,d))}}break;case"linear":{let f=x;const b=e.deltaX||0,E=e.deltaY||0;u=m=>{const g=L(m,n);if(g===void 0)return;const j=g[0]-f[0],M=g[1]-f[1],v=j*b+M*E;Math.abs(v)>=.1&&(d+=v,f=g,o(m,d))}}break;default:throw new Error(`Unsupported movement mode in configuration: ${JSON.stringify(e)}`)}function h(f){s?(c.removeEventListener("touchmove",u),c.removeEventListener("touchend",h),c.removeEventListener("touchcancel",h)):(c.removeEventListener("mousemove",u),c.removeEventListener("mouseup",h)),i(f,d)}s?(c.addEventListener("touchmove",u),c.addEventListener("touchend",h),c.addEventListener("touchcancel",h)):(c.addEventListener("mousemove",u),c.addEventListener("mouseup",h))}function N(e){if(typeof e=="string")switch(e){case"circular":return{mode:"circular",deltaR:1};case"horizontal":case"vertical":return{mode:"linear",deltaX:e==="horizontal"?1:0,deltaY:e==="vertical"?-1:0};default:throw new Error(`invalid motion mode string: ${e}`)}else if(e.mode)return e;throw new Error("Invalid movement configuration")}function P({size:e=200,initialDegrees:a,snap:t,min:o,max:i,onBeginChange:s,onChangeValue:n,onCommitValue:c,classNamePrefix:l="wheely-",renderLabel:y,movementMode:D="circular"}){const x=w.useRef(null),[d,u]=w.useState(a||0);w.useEffect(()=>{u(a||0)},[a]);const[h,f]=w.useState(!1),b=w.useCallback(g=>{const j=d,M=v=>$(j,v,t,o,i);x.current&&!h&&(f(!0),s&&s(j),A(N(D),x.current,g,(v,R)=>{const p=M(R);d!==p&&(u(p),n&&n(p))},(v,R)=>{f(!1);const p=M(R);u(p),c&&c(p)}))},[h,d,i,o,D,s,n,c,t]),E=`${e}px`,m={width:E,height:E,touchAction:"none"};return r.jsxs("div",{className:`${l}base`,style:m,ref:x,onMouseDown:b,onTouchStart:b,children:[r.jsx("div",{className:`${l}inner`,style:{...m,transform:`rotate(${d.toFixed(1)}deg)`}}),y?y({degrees:d,changing:h,style:m}):null]})}const W={title:"Wheel",component:P},T=({snap10:e,min0:a,max400:t,movementMode:o})=>r.jsx(P,{size:200,snap:e?10:void 0,min:a?0:void 0,max:t?400:void 0,movementMode:o,initialDegrees:42,renderLabel:({degrees:i,style:s,changing:n})=>r.jsxs("div",{className:"my-wheel-label",style:s,children:[i.toFixed(2),n?"...":""]})});T.args={snap10:!1,min0:!1,max400:!1,movementMode:"circular"};T.argTypes={movementMode:{options:["circular","horizontal","vertical"],control:{type:"radio"},defaultValue:"circular"}};const k=()=>{const[e,a]=w.useState("0000000"),t=(i,s)=>{const n=Array.from(e);n.splice(i,1,`${Math.min(s,9)}`),a(n.join(""))},o=Array.from(e).map((i,s)=>r.jsx(P,{size:70,min:0,initialDegrees:+i*36,onChangeValue:n=>t(s,Math.round(n%360/36))},s));return r.jsxs("div",{children:[r.jsx("input",{readOnly:!0,value:`${e.substring(0,3)}-${e.substring(3)}`,style:{fontSize:"40px"}}),r.jsx("div",{style:{display:"flex",marginTop:".5em"},children:o})]})},O=()=>{const[t,o]=w.useState(1),[i,s]=w.useState(Math.floor(100/2)),n=10,c=({degrees:l,style:y})=>r.jsx("div",{className:"my-wheel-label",style:y,children:Math.floor(l/n)});return r.jsxs("table",{children:[r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(P,{size:150,min:1*n,max:i*n,initialDegrees:t*n,renderLabel:c,onChangeValue:l=>o(Math.floor(l/n))})}),r.jsxs("td",{children:[" ",r.jsx(P,{size:150,min:t*n,max:100*n,initialDegrees:i*n,renderLabel:c,onChangeValue:l=>s(Math.floor(l/n))})]})]}),r.jsx("tr",{children:r.jsxs("td",{colSpan:2,style:{textAlign:"center"},children:["Print pages: ",t," to ",i," / ",100,r.jsx("br",{}),"Print capacity: ",r.jsx("progress",{max:100,value:i-t+1})]})})]})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{O as InfuriatingRangeInput,k as PhoneNumberInput,T as WithACustomLabel,W as default};
